<%= form_with model: article, local: true do |f| %>
  <div class="form-group mb" style="max-width: 30%">
    <%= f.label :category_id, "カテゴリー" %>
    <%= f.select :category_id, [["学び",1],["感想",2],["質問への回答",3],["その他",4]], { include_blank: "選択して下さい" },{ class: "form-control custom-select" } %>
  </div>

  <div class="form-group mb">
    <%= f.label :title, "タイトル" %><br />
    <%= f.text_field :title, autofocus: true, autocomplete: "title",class: "form-control" %>
  </div>
  
  <button id="item-form__plus" type="button" class="btn btn-success mt-4">問い+</button>
  <%= link_to "問い-", article_item_destroy_path , {method: :delete , id: "item-form__minus", class: "btn btn-danger mt-4" } %>  

  <div id="item-form">
    <% @article_items.each.with_index(0) do | article_item, num |%>
      <%= f.fields_for article_item do |item|%>
        <div class="form-group mb">
          <li class="item-form__list" style="width: 100%">
            <%= item.label :question, "問い#{num+1}", class:"mt-3" %>
            <%= item.select :question, ArticleItem.questions.keys.to_a, { include_blank: "選択して下さい" },{ name: "items[item#{num+1}][]", class: "form-control custom-select" } %> 

            <%= item.label :body, "内容#{num+1}" %>
            <%= item.text_area :body, name: "items[item#{num+1}][]", autofocus: true, autocomplete: "body",class: "form-control" %>
          </li>
        </div>
      <% end %>
    <% end %>
  </div>

  <div class="button">
    <%= f.submit submit, class: "btn btn-primary",id: "form" %>
  </div>
<% end %>